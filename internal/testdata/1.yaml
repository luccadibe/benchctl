benchmark:
  name: simple-benchmark
  output_dir: ./results

hosts:
  local: {}
  db:
    ip: 10.0.0.10
    username: ubuntu
    key_file: ~/.ssh/id_rsa

data_schema:
  format: csv
  timestamp:
    type: timestamp
    unit: ns
  latency_ms:
    type: float
    unit: ms
  status:
    type: string

stages:
  - name: start-db
    host: db
    command: sudo systemctl start postgresql
    health_check:
      type: port
      target: 10.0.0.10:5432
      timeout: 30s
      retries: 10
  - name: load-generator
    host: local
    script: ./scripts/load-gen.sh
    outputs:
      - remote_path: /tmp/data.csv
        local_path: ./results/run-001/data.csv

plots:
  - name: latency_over_time
    title: Latency over time
    type: time_series
    x: timestamp
    y: latency_ms
    aggregation: p95
    format: png
    export_path: ./results/run-001/plots/latency.png

